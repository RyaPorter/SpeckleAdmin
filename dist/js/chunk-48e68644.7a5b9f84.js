(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48e68644"],{"05ce":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("md-card",{staticClass:"md-elevation-3",attrs:{"md-with-hover":""}},[i("md-card-header",{staticClass:"bg-ghost-white"},[i("md-card-header-text",[i("div",{staticClass:"md-title"},[t._v("Data")]),i("div",{staticClass:"md-caption"},[t._v('Add/remove data below. Strings, numbers and booleans are supported. Changes will not be saved automatically until you click "save".')]),t.stream.commitMessage?i("div",[i("br"),i("md-divider"),i("br"),i("div",{staticClass:"md-caption"},[i("i",[t._v("Current commit message:")]),t._v(" "+t._s(t.stream.commitMessage))])],1):t._e()]),i("md-button",{staticClass:"md-primary md-raised",attrs:{disabled:!t.changed},nativeOn:{click:function(e){t.preSaveData()}}},[t._v(" SAVE ")])],1),i("md-card-content",{staticStyle:{"padding-bottom":"20px"}},[t.deStream?i("div",{staticClass:"md-layout-item md-size-100"},t._l(t.mergedLayers,function(e){return i("stream-layer",{key:e.guid,attrs:{layer:e},on:{update:t.updateLayer,remove:t.removeLayer}})})):i("div",{staticClass:"md-layout-item md-size-100 md-caption text-center",staticStyle:{padding:"5px"}},[i("br"),t._v("\n        There's no data in this stream... yet!\n        "),i("br")]),i("div",{staticClass:"md-layout",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"md-layout-item"},[i("md-button",{staticClass:"md-icon-button md-raised md-primary",nativeOn:{click:function(e){return t.addLayer(e)}}},[i("md-icon",[t._v("add")])],1),i("md-button",{staticClass:"md-icon-button md-raised",nativeOn:{click:function(e){t.showImportCSVDialog=!0}}},[i("md-icon",[t._v("cloud_upload")]),i("md-tooltip",{attrs:{"md-direction":"top"}},[t._v("Paste a CSV file")])],1)],1),i("div",{staticClass:"md-layout-item text-right"},[i("md-button",{staticClass:"md-primary md-raised",attrs:{disabled:!t.changed},nativeOn:{click:function(e){t.preSaveData()}}},[t._v(" SAVE ")])],1)])])],1),i("br"),i("br"),i("md-dialog",{attrs:{"md-active":t.showImportCSVDialog},on:{"update:mdActive":function(e){t.showImportCSVDialog=e}}},[i("md-dialog-title",[t._v("Import CSV")]),i("div",{staticClass:"md-layout md-gutter",staticStyle:{width:"50vw",padding:"24px 24px 0","box-sizing":"border-box"}},[i("div",{staticClass:"md-layout-item md-size-100"},[i("p",[t._v("Paste your csv below.")]),i("p",{staticClass:"md-caption"},[t._v('We assume the first row will contain the column names. Each column will become a separate "output port" or layer.')])]),i("div",{staticClass:"md-layout-item md-size-100"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.csvInput,expression:"csvInput"}],staticStyle:{height:"150px",width:"100%"},domProps:{value:t.csvInput},on:{input:function(e){e.target.composing||(t.csvInput=e.target.value)}}})]),i("div")]),i("md-dialog-actions",[i("md-button",{staticClass:"md-primary",on:{click:function(e){t.closeCsvDialog()}}},[t._v("Cancel")]),i("md-button",{staticClass:"md-primary md-raised",on:{click:function(e){t.importCSV()}}},[t._v("Import CSV")])],1)],1),i("md-dialog",{attrs:{"md-active":t.showSaveDialog},on:{"update:mdActive":function(e){t.showSaveDialog=e}}},[i("md-dialog-title",[t._v("Commit message")]),i("div",{staticClass:"md-layout md-gutter",staticStyle:{padding:"24px 24px 0","box-sizing":"border-box"}},[i("div",{staticClass:"md-layout-item"},[i("p",[t._v("Write a short description of the reasons behind the changes you just made.")]),i("md-field",[i("label",[t._v("changelog:")]),i("md-textarea",{model:{value:t.commitMessage,callback:function(e){t.commitMessage=e},expression:"commitMessage"}})],1)],1)]),i("md-dialog-actions",[i("md-button",{staticClass:"md-primary",on:{click:function(e){t.showSaveDialog=!1}}},[t._v("Cancel")]),i("md-button",{staticClass:"md-primary md-raised",on:{click:function(e){t.saveData()}}},[t._v("Save changes")])],1)],1)],1)},a=[],n=(i("7514"),i("6b54"),i("7f7f"),i("ac6a"),i("cadf"),i("551c"),i("097d"),i("f7fe")),s=i.n(n),o=(i("13bb"),i("bc3a")),d=i.n(o),u=(i("c64e"),i("369b")),c=i.n(u),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.layer?i("div",{staticClass:"md-layout layer md-alignment-center-space-between"},[i("div",{staticClass:"md-layout-item md-size-20 md-body-2",staticStyle:{"padding-left":"12px","box-sizing":"border-box"}},[i("span",{staticClass:"md-caption"},[t._v("Name: ")]),i("editable-span",{attrs:{text:t.layer.name,"data-key":t.layer.guid},on:{update:t.updateName}})],1),i("div",{staticClass:"md-layout-item md-size-60",staticStyle:{"box-sizing":"border-box","padding-left":"10px"}},[t.expanded?t._e():i("md-field",[i("label",[t._v("data")]),i("md-input",{model:{value:t.rawData,callback:function(e){t.rawData=e},expression:"rawData"}})],1)],1),i("div",{staticClass:"md-layout-item md-size-10 text-right"},[i("md-button",{staticClass:"md-icon-button md-dense md-primary",nativeOn:{click:function(e){t.expanded=!t.expanded}}},[i("md-icon",[t._v(t._s(t.expanded?"expand_less":"expand_more"))])],1),i("md-button",{staticClass:"md-icon-button md-dense md-accent",nativeOn:{click:function(e){t.removeLayer()}}},[i("md-icon",[t._v("delete_forever")])],1)],1),t.expanded?i("div",{staticClass:"md-layout-item md-size-100 md-layout md-gutter",staticStyle:{"box-sizing":"border-box",padding:"10px"}},[i("div",{staticClass:"md-layout-item md-size-100"},[i("md-switch",{model:{value:t.splitArray,callback:function(e){t.splitArray=e},expression:"splitArray"}},[t._v(t._s(t.splitArray?"split at commas":"single"))])],1),i("div",{staticClass:"md-layout-item md-size-50"},[i("md-field",[i("label",[t._v("data")]),i("md-textarea",{model:{value:t.rawData,callback:function(e){t.rawData=e},expression:"rawData"}})],1)],1),i("div",{staticClass:"md-layout-item md-size-50"},[i("span",{staticClass:"md-caption"},[t._v("Parsed data:")]),i("pre",[t._v(t._s(t.parsedData))])])]):t._e()]):t._e()},h=[],m=(i("28a5"),{name:"StreamLayer",props:{layer:Object},watch:{speckledData:function(){if(this.firstCall)return this.firstCall=!1;this.emitUpdate()},layer:function(t){this.rawData=this.layer.objects.join(", ")}},computed:{speckledData:function(){if(!this.parsedData)return[];var t=this.parsedData.map(function(t){return"the meaning of life"===t?{type:"Number",value:42}:"0"===t?{type:"Number",value:0}:"boolean"===typeof t?{type:"Boolean",value:t}:"string"===typeof t?{type:"String",value:t}:"number"===typeof t?{type:"Number",value:t}:void 0});return t},parsedData:function(){if(!this.rawData)return null;var t=[];return t=this.splitArray?this.rawData.split(",").map(function(t){return t.trim()}).map(function(t){var e=null;return e=parseFloat(t),e||(e="true"===t||"false"!==t&&t),e}):[this.rawData],t}},data:function(){return{rawData:"",expanded:!1,splitArray:!0,firstCall:!0}},methods:{removeLayer:function(){this.$emit("remove",this.layer)},updateName:function(t){this.layer.name=t.text.trim(),this.emitUpdate()},__emitUpdate:function(){this.$emit("update",{layer:this.layer,objects:this.speckledData})},emitUpdate:s()(function(){this.$emit("update",{layer:this.layer,objects:this.speckledData})},1e3)},created:function(){this.rawData=this.layer.objects.join(", ")}}),f=m,p=(i("5c22"),i("2877")),g=Object(p["a"])(f,l,h,!1,null,"5cf71c1f",null);g.options.__file="StreamLayer.vue";var _=g.exports,v={name:"StreamEditView",components:{StreamLayer:_},watch:{stream:function(t,e){this.fetchData(t.streamId)}},computed:{mergedLayers:function(){var t=this;if(!this.deStream)return[];var e=[];return this.deStream.layers.forEach(function(i){e.push({name:i.name,isArray:!0,startIndex:i.startIndex,objectCount:i.objectCount,guid:i.guid,topology:i.topology,objects:t.deStream.objects.slice(i.startIndex,i.startIndex+i.objectCount).map(function(t){return t.value.toString()})})}),e},deStream:function(){var t=this;return this.$store.state.deStreams.find(function(e){return e.streamId===t.$route.params.streamId})},stream:function(){var t=this;return this.$store.state.streams.find(function(e){return e.streamId===t.$route.params.streamId})},canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id}},data:function(){return{changed:!1,showSaveDialog:!1,commitMessage:"no message",showImportCSVDialog:!1,csvInput:""}},methods:{restore:function(){this.$store.dispatch("updateStream",{streamId:this.stream.streamId,deleted:!1})},updateLayer:function(t){var e=t.layer,i=t.objects;this.$store.commit("UPDATE_DE_STREAM_LAYER",{streamId:this.stream.streamId,layer:e,objects:i}),this.changed=!0},addLayer:function(){this.$store.commit("ADD_DE_STREAM_LAYER",{streamId:this.stream.streamId}),this.changed=!0},removeLayer:function(t){this.$store.commit("REMOVE_DE_STREAM_LAYER",{streamId:this.stream.streamId,layer:t}),this.changed=!0},preSaveData:function(){this.showSaveDialog=!0},saveData:function(){var t=this;this.$store.dispatch("updateStreamObjectsAndLayers",{streamId:this.stream.streamId,commitMessage:this.commitMessage}).then(function(e){t.showSaveDialog=!1,t.commitMessage="no message",t.changed=!1,console.log(e)}).catch(function(t){console.error(t)})},fetchData:function(t){var e=this;console.log("fetching data for ".concat(t)),d.a.get("streams/".concat(t,"?fields=layers")).then(function(i){return e.layers=i.data.resource.layers,d.a.get("streams/".concat(t,"/objects?fields=type,value"))}).then(function(i){e.objects=i.data.resources,e.$store.commit("ADD_DE_STREAM",{streamId:t,layers:e.layers,objects:e.objects})}).catch(function(t){console.error(t)})},importCSV:function(){var t=c.a.parse(this.csvInput,{dynamicTyping:!1}),e=t.data[0].map(function(e,i){return t.data.map(function(t){return t[i]})});this.$store.commit("APPEND_DE_STREAM_LAYERS_FROM_CSV",{streamId:this.stream.streamId,transposed:e}),this.showImportCSVDialog=!1,this.csvInput="",this.changed=!0},closeCsvDialog:function(){this.showImportCSVDialog=!1,this.csvInput=""}},mounted:function(){var t=this;console.log("hello data");this.$store.state.streams.find(function(e){return e.streamId===t.$route.params.streamId});this.fetchData(this.$route.params.streamId)}},y=v,b=(i("bd4e"),Object(p["a"])(y,r,a,!1,null,"847b7564",null));b.options.__file="StreamData.vue";e["default"]=b.exports},"369b":function(t,e,i){var r,a,n;
/* @license
Papa Parse
v4.6.2
https://github.com/mholt/PapaParse
License: MIT
*/Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),function(i,s){a=[],r=s,n="function"===typeof r?r.apply(e,a):r,void 0===n||(t.exports=n)}(0,function(){"use strict";var t,e,i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{},r=!i.document&&!!i.postMessage,a=r&&/(\?|&)papaworker(=|&|$)/.test(i.location.search),n=!1,s={},o=0,d={parse:function(e,r){var a=(r=r||{}).dynamicTyping||!1;if(w(a)&&(r.dynamicTypingFunction=a,a={}),r.dynamicTyping=a,r.transform=!!w(r.transform)&&r.transform,r.worker&&d.WORKERS_SUPPORTED){var u=function(){if(!d.WORKERS_SUPPORTED)return!1;if(!n&&null===d.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var e=d.SCRIPT_PATH||t;e+=(-1!==e.indexOf("?")?"&":"?")+"papaworker";var r=new i.Worker(e);return r.onmessage=v,r.id=o++,s[r.id]=r}();return u.userStep=r.step,u.userChunk=r.chunk,u.userComplete=r.complete,u.userError=r.error,r.step=w(r.step),r.chunk=w(r.chunk),r.complete=w(r.complete),r.error=w(r.error),delete r.worker,void u.postMessage({input:e,config:r,workerId:u.id})}var c=null;return d.NODE_STREAM_INPUT,"string"==typeof e?c=r.download?new l(r):new m(r):!0===e.readable&&w(e.read)&&w(e.on)?c=new f(r):(i.File&&e instanceof File||e instanceof Object)&&(c=new h(r)),c.stream(e)},unparse:function(t,e){var i=!1,r=!0,a=",",n="\r\n",s='"',o=!1;!function(){"object"==typeof e&&("string"!=typeof e.delimiter||d.BAD_DELIMITERS.filter(function(t){return-1!==e.delimiter.indexOf(t)}).length||(a=e.delimiter),("boolean"==typeof e.quotes||Array.isArray(e.quotes))&&(i=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(o=e.skipEmptyLines),"string"==typeof e.newline&&(n=e.newline),"string"==typeof e.quoteChar&&(s=e.quoteChar),"boolean"==typeof e.header&&(r=e.header))}();var u=new RegExp(s,"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return l(null,t,o);if("object"==typeof t[0])return l(c(t[0]),t,o)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:c(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),l(t.fields||[],t.data||[],o);throw"exception: Unable to serialize unrecognized input";function c(t){if("object"!=typeof t)return[];var e=[];for(var i in t)e.push(i);return e}function l(t,e,i){var s="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var o=Array.isArray(t)&&0<t.length,d=!Array.isArray(e[0]);if(o&&r){for(var u=0;u<t.length;u++)0<u&&(s+=a),s+=h(t[u],u);0<e.length&&(s+=n)}for(var c=0;c<e.length;c++){var l=o?t.length:e[c].length,m=!1,f=o?0===Object.keys(e[c]).length:0===e[c].length;if(i&&!o&&(m="greedy"===i?""===e[c].join("").trim():1===e[c].length&&0===e[c][0].length),"greedy"===i&&o){for(var p=[],g=0;g<l;g++){var _=d?t[g]:g;p.push(e[c][_])}m=""===p.join("").trim()}if(!m){for(var v=0;v<l;v++){0<v&&!f&&(s+=a);var y=o&&d?t[v]:v;s+=h(e[c][y],v)}c<e.length-1&&(!i||0<l&&!f)&&(s+=n)}}return s}function h(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);t=t.toString().replace(u,s+s);var r="boolean"==typeof i&&i||Array.isArray(i)&&i[e]||function(t,e){for(var i=0;i<e.length;i++)if(-1<t.indexOf(e[i]))return!0;return!1}(t,d.BAD_DELIMITERS)||-1<t.indexOf(a)||" "===t.charAt(0)||" "===t.charAt(t.length-1);return r?s+t+s:t}}};if(d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\ufeff",d.BAD_DELIMITERS=["\r","\n",'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!r&&!!i.Worker,d.SCRIPT_PATH=null,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=_,d.ParserHandle=p,d.NetworkStreamer=l,d.FileStreamer=h,d.StringStreamer=m,d.ReadableStreamStreamer=f,i.jQuery){var u=i.jQuery;u.fn.parse=function(t){var e=t.config||{},r=[];return this.each(function(t){if("INPUT"!==u(this).prop("tagName").toUpperCase()||"file"!==u(this).attr("type").toLowerCase()||!i.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)r.push({file:this.files[a],inputElem:this,instanceConfig:u.extend({},e)})}),a(),this;function a(){if(0!==r.length){var e,i,a,s,o=r[0];if(w(t.before)){var c=t.before(o.file,o.inputElem);if("object"==typeof c){if("abort"===c.action)return e="AbortError",i=o.file,a=o.inputElem,s=c.reason,void(w(t.error)&&t.error({name:e},i,a,s));if("skip"===c.action)return void n();"object"==typeof c.config&&(o.instanceConfig=u.extend(o.instanceConfig,c.config))}else if("skip"===c)return void n()}var l=o.instanceConfig.complete;o.instanceConfig.complete=function(t){w(l)&&l(t,o.file,o.inputElem),n()},d.parse(o.file,o.instanceConfig)}else w(t.complete)&&t.complete()}function n(){r.splice(0,1),a()}}}function c(t){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=C(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new p(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,e){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);void 0!==r&&(t=r)}this.isFirstChunk=!1;var n=this._partialLine+t;this._partialLine="";var s=this._handle.parse(n,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var o=s.meta.cursor;this._finished||(this._partialLine=n.substring(o-this._baseIndex),this._baseIndex=o),s&&s.data&&(this._rowCount+=s.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)i.postMessage({results:s,workerId:d.WORKER_ID,finished:u});else if(w(this._config.chunk)&&!e){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return;s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!u||!w(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||s&&s.meta.paused||this._nextChunk(),s}},this._sendError=function(t){w(this._config.error)?this._config.error(t):a&&this._config.error&&i.postMessage({workerId:d.WORKER_ID,error:t,finished:!1})}}function l(t){var e;(t=t||{}).chunkSize||(t.chunkSize=d.RemoteChunkSize),c.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),r||(e.onload=k(this._chunkLoaded,this),e.onerror=k(this._chunkError,this)),e.open("GET",this._input,!r),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var i in t)e.setRequestHeader(i,t[i])}if(this._config.chunkSize){var a=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+a),e.setRequestHeader("If-None-Match","webkit-no-cache")}try{e.send()}catch(t){this._chunkError(t.message)}r&&0===e.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._finished=!this._config.chunkSize||this._start>function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substr(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var i=e.statusText||t;this._sendError(new Error(i))}}function h(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=d.LocalChunkSize),c.call(this,t);var r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,i=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=k(this._chunkLoaded,this),e.onerror=k(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var a=Math.min(this._start+this._config.chunkSize,this._input.size);t=i.call(t,this._start,a)}var n=e.readAsText(t,this._config.encoding);r||this._chunkLoaded({target:{result:n}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function m(t){var e;c.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,i=t?e.substr(0,t):e;return e=t?e.substr(t):"",this._finished=!e,this.parseChunk(i)}}}function f(t){c.call(this,t=t||{});var e=[],i=!0,r=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=k(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=k(function(t){this._streamCleanUp(),this._sendError(t)},this),this._streamEnd=k(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(t){var e,i,r,a=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,n=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,s=this,o=0,u=0,c=!1,l=!1,h=[],m={data:[],errors:[],meta:{}};if(w(t.step)){var f=t.step;t.step=function(e){if(m=e,y())v();else{if(v(),0===m.data.length)return;o+=e.data.length,t.preview&&o>t.preview?i.abort():f(m,s)}}}function p(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function v(){if(m&&r&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines)for(var e=0;e<m.data.length;e++)p(m.data[e])&&m.data.splice(e--,1);return y()&&function(){if(m){for(var e=0;y()&&e<m.data.length;e++)for(var i=0;i<m.data[e].length;i++){var r=m.data[e][i];t.trimHeaders&&(r=r.trim()),h.push(r)}m.data.splice(0,1)}}(),function(){if(!m||!t.header&&!t.dynamicTyping&&!t.transform)return m;for(var e=0;e<m.data.length;e++){var i,r=t.header?{}:[];for(i=0;i<m.data[e].length;i++){var a=i,n=m.data[e][i];t.header&&(a=i>=h.length?"__parsed_extra":h[i]),t.transform&&(n=t.transform(n,a)),n=b(a,n),"__parsed_extra"===a?(r[a]=r[a]||[],r[a].push(n)):r[a]=n}m.data[e]=r,t.header&&(i>h.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+h.length+" fields but parsed "+i,u+e):i<h.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+h.length+" fields but parsed "+i,u+e))}return t.header&&m.meta&&(m.meta.fields=h),u+=m.data.length,m}()}function y(){return t.header&&0===h.length}function b(e,i){return r=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[r]&&(t.dynamicTyping[r]=t.dynamicTypingFunction(r)),!0===(t.dynamicTyping[r]||t.dynamicTyping)?"true"===i||"TRUE"===i||"false"!==i&&"FALSE"!==i&&(a.test(i)?parseFloat(i):n.test(i)?new Date(i):""===i?null:i):i;var r}function k(t,e,i,r){m.errors.push({type:t,code:e,message:i,row:r})}this.parse=function(a,n,s){var o=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substr(0,1048576);var i=new RegExp(g(e)+"([^]*?)"+g(e),"gm"),r=(t=t.replace(i,"")).split("\r"),a=t.split("\n"),n=1<a.length&&a[0].length<r[0].length;if(1===r.length||n)return"\n";for(var s=0,o=0;o<r.length;o++)"\n"===r[o][0]&&s++;return s>=r.length/2?"\r\n":"\r"}(a,o)),r=!1,t.delimiter)w(t.delimiter)&&(t.delimiter=t.delimiter(a),m.meta.delimiter=t.delimiter);else{var u=function(e,i,r,a){for(var n,s,o,u=[",","\t","|",";",d.RECORD_SEP,d.UNIT_SEP],c=0;c<u.length;c++){var l=u[c],h=0,m=0,f=0;o=void 0;for(var g=new _({comments:a,delimiter:l,newline:i,preview:10}).parse(e),v=0;v<g.data.length;v++)if(r&&p(g.data[v]))f++;else{var y=g.data[v].length;m+=y,void 0!==o?1<y&&(h+=Math.abs(y-o),o=y):o=y}0<g.data.length&&(m/=g.data.length-f),(void 0===s||h<s)&&1.99<m&&(s=h,n=l)}return{successful:!!(t.delimiter=n),bestDelimiter:n}}(a,t.newline,t.skipEmptyLines,t.comments);u.successful?t.delimiter=u.bestDelimiter:(r=!0,t.delimiter=d.DefaultDelimiter),m.meta.delimiter=t.delimiter}var l=C(t);return t.preview&&t.header&&l.preview++,e=a,i=new _(l),m=i.parse(e,n,s),v(),c?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return c},this.pause=function(){c=!0,i.abort(),e=e.substr(i.getCharIndex())},this.resume=function(){c=!1,s.streamer.parseChunk(e,!0)},this.aborted=function(){return l},this.abort=function(){l=!0,i.abort(),m.meta.aborted=!0,w(t.complete)&&t.complete(m),e=""}}function g(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(t){var e,i=(t=t||{}).delimiter,r=t.newline,a=t.comments,n=t.step,s=t.preview,o=t.fastMode,u=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(u=t.escapeChar),("string"!=typeof i||-1<d.BAD_DELIMITERS.indexOf(i))&&(i=","),a===i)throw"Comment character same as delimiter";!0===a?a="#":("string"!=typeof a||-1<d.BAD_DELIMITERS.indexOf(a))&&(a=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var c=0,l=!1;this.parse=function(t,d,h){if("string"!=typeof t)throw"Input must be a string";var m=t.length,f=i.length,p=r.length,g=a.length,_=w(n),v=[],y=[],b=[],C=c=0;if(!t)return M();if(o||!1!==o&&-1===t.indexOf(e)){for(var k=t.split(r),S=0;S<k.length;S++){if(b=k[S],c+=b.length,S!==k.length-1)c+=r.length;else if(h)return M();if(!a||b.substr(0,g)!==a){if(_){if(v=[],O(b.split(i)),z(),l)return M()}else O(b.split(i));if(s&&s<=S)return v=v.slice(0,s),M(!0)}}return M()}for(var E,x=t.indexOf(i,c),D=t.indexOf(r,c),I=new RegExp(u.replace(/[-[\]\/{}()*+?.\\^$|]/g,"\\$&")+e,"g");;)if(t[c]!==e)if(a&&0===b.length&&t.substr(c,g)===a){if(-1===D)return M();c=D+p,D=t.indexOf(r,c),x=t.indexOf(i,c)}else if(-1!==x&&(x<D||-1===D))b.push(t.substring(c,x)),c=x+f,x=t.indexOf(i,c);else{if(-1===D)break;if(b.push(t.substring(c,D)),j(D+p),_&&(z(),l))return M();if(s&&v.length>=s)return M(!0)}else for(E=c,c++;;){if(-1===(E=t.indexOf(e,E+1)))return h||y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:v.length,index:c}),L();if(E===m-1)return L(t.substring(c,E).replace(I,e));if(e!==u||t[E+1]!==u){if(e===u||0===E||t[E-1]!==u){var R=T(-1===D?x:Math.min(x,D));if(t[E+1+R]===i){b.push(t.substring(c,E).replace(I,e)),c=E+1+R+f,x=t.indexOf(i,c),D=t.indexOf(r,c);break}var A=T(D);if(t.substr(E+1+A,p)===r){if(b.push(t.substring(c,E).replace(I,e)),j(E+1+A+p),x=t.indexOf(i,c),_&&(z(),l))return M();if(s&&v.length>=s)return M(!0);break}y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:v.length,index:c}),E++}}else E++}return L();function O(t){v.push(t),C=c}function T(e){var i=0;if(-1!==e){var r=t.substring(E+1,e);r&&""===r.trim()&&(i=r.length)}return i}function L(e){return h||(void 0===e&&(e=t.substr(c)),b.push(e),c=m,O(b),_&&z()),M()}function j(e){c=e,O(b),b=[],D=t.indexOf(r,c)}function M(t){return{data:v,errors:y,meta:{delimiter:i,linebreak:r,aborted:l,truncated:!!t,cursor:C+(d||0)}}}function z(){n(M()),v=[],y=[]}},this.abort=function(){l=!0},this.getCharIndex=function(){return c}}function v(t){var e=t.data,i=s[e.workerId],r=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var a={abort:function(){r=!0,y(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(w(i.userStep)){for(var n=0;n<e.results.data.length&&(i.userStep({data:[e.results.data[n]],errors:e.results.errors,meta:e.results.meta},a),!r);n++);delete e.results}else w(i.userChunk)&&(i.userChunk(e.results,a,e.file),delete e.results)}e.finished&&!r&&y(e.workerId,e.results)}function y(t,e){var i=s[t];w(i.userComplete)&&i.userComplete(e),i.terminate(),delete s[t]}function b(){throw"Not implemented."}function C(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var i in t)e[i]=C(t[i]);return e}function k(t,e){return function(){t.apply(e,arguments)}}function w(t){return"function"==typeof t}return a?i.onmessage=function(t){var e=t.data;if(void 0===d.WORKER_ID&&e&&(d.WORKER_ID=e.workerId),"string"==typeof e.input)i.postMessage({workerId:d.WORKER_ID,results:d.parse(e.input,e.config),finished:!0});else if(i.File&&e.input instanceof File||e.input instanceof Object){var r=d.parse(e.input,e.config);r&&i.postMessage({workerId:d.WORKER_ID,results:r,finished:!0})}}:d.WORKERS_SUPPORTED&&(e=document.getElementsByTagName("script"),t=e.length?e[e.length-1].src:"",document.body?document.addEventListener("DOMContentLoaded",function(){n=!0},!0):n=!0),(l.prototype=Object.create(c.prototype)).constructor=l,(h.prototype=Object.create(c.prototype)).constructor=h,(m.prototype=Object.create(m.prototype)).constructor=m,(f.prototype=Object.create(c.prototype)).constructor=f,d})},5521:function(t,e,i){},"5c22":function(t,e,i){"use strict";var r=i("5521"),a=i.n(r);a.a},baa0:function(t,e,i){},bd4e:function(t,e,i){"use strict";var r=i("baa0"),a=i.n(r);a.a}}]);
//# sourceMappingURL=chunk-48e68644.7a5b9f84.js.map